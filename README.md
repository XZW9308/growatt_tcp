# ⚡ Growatt TCP Modbus 集成

## 📖 概述

该集成支持通过 **Modbus TCP 协议** 连接 **Growatt 逆变器**（包括 **SPF6000ESPLUS** 和 **SPE12000ES** 混合逆变器），可在 **Home Assistant** 中实时监控逆变器的各项运行参数。

通过本集成，用户可以方便地查看逆变器的：

- 🔌 电压、电流  
- ⚡ 实时功率与累计能量  
- 🔋 电池状态与充放电情况  
- 🌡️ 设备温度  
- 🖥️ 系统运行状态  

> 本集成已在 **SPF6000ESPLUS** 和 **SPE12000ES** 设备上完成测试，
> Growatt离网逆变器SPF与混网逆变器SPE全系列支持
> 其他型号请用户自行验证寄存器兼容性。

---

## ✨ 功能特性

- ✅ 基于 **Modbus TCP**
- ✅ 支持 **74 个传感器实体**（Growatt官方文档全部传感器）
- ✅ 支持 Home Assistant UI 配置（Config Flow）
- ✅ 本地轮询（Local Polling），无需云端
- ✅ 设备 + 实体完整呈现，便于仪表盘展示

---

## 📦 添加自定义存储库到 HACS（推荐）

1. 在 Home Assistant 中打开 **HACS**
2. 点击右上角 **⋮ → Custom repositories**
3. 点击 **Add Repository**，输入：
   https://github.com/XZW9308/growatt_tcp.git
4. 类型选择 **Integration**，点击 **Add**
5. 返回 HACS，找到 **Growatt Inverter (Modbus TCP)**，点击 **DOWNLOAD**
6. **重启 Home Assistant**
7. 前往 **设置 → 设备和服务 → 添加集成**
8. 搜索 **Growatt Inverter (Modbus TCP)** 并添加

---

## 🧪 已测试设备

- 🔋 **SPF6000ESPLUS 逆变器**
- 🔋 **SPE12000ES 混合逆变器**

### ⚠️ 注意

- 本集成目前仅在以上设备上验证
- 其他型号可能存在寄存器差异
- 欢迎反馈测试结果或提交 PR

---

## ⚙️ 安装要求

- **Home Assistant 2023.8.0 或更高版本**

---

## ➕ 添加集成（配置说明）

| 参数 | 说明 |
|----|----|
| 🌐 主机 | 485 串口服务器 IP |
| 🔌 端口 | 默认 `502` |
| 🆔 从机 ID | 默认 `1` |


---

## 🔁 485 串口服务器设置（重要）

| 参数 | 建议值 |
|----|----|
| 串口协议 | Modbus |
| Server 协议 | TCP |
| 波特率 | **9600** |
| 数据位 | 8 |
| 校验位 | None |
| 停止位 | 1 |

> ⚠️ 串口服务器配置错误会导致无法通信

---

### 🧩 RS485 与 RJ45 网线头接线示意图

<img width="630" height="206" alt="接线图" src="https://github.com/user-attachments/assets/25777002-bd41-477e-a219-98a845a79659" />

**说明：**

- 图中为 **RJ45 插头正面（卡扣在背面）**
- 实际只使用 **2 根线（A / B）**
- 不同厂家的 485 串口服务器 **A / B 定义可能不同**
- 若无法通信，请 **对调 A / B 再测试**

---

## 📊 传感器说明

本集成共提供 **74 个传感器实体**，包括但不限于：

- 🖥️ 系统状态  
- 🔋 电池电压 / 电流 / SOC  
- ☀️ PV1 / PV2 电压与功率  
- ⚡ 实时功率 / 累计能量  
- 🔄 充放电能量统计  
- 🌡️ 设备温度  

---

## 🛠️ 故障排除

### 串口服务器问题

- 检查 485 串口服务器是否正常运行
- 避免死机、掉线或频繁重启
- 确认网络与 Modbus 参数正确

---

## 📌 说明

- 本项目为 **非官方 Growatt 集成**
- 仅用于本地监控与学习交流
